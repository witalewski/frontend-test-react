(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{159:function(e,t,a){e.exports={srcSet:a.p+"static/media/open-now-checkbox--unchecked.png 16w",images:[{path:a.p+"static/media/open-now-checkbox--unchecked.png",width:16,height:16}],src:a.p+"static/media/open-now-checkbox--unchecked.png",toString:function(){return a.p+"static/media/open-now-checkbox--unchecked.png"},placeholder:void 0,width:16,height:16}},160:function(e,t,a){e.exports={srcSet:a.p+"static/media/open-now-checkbox--checked.png 16w",images:[{path:a.p+"static/media/open-now-checkbox--checked.png",width:16,height:16}],src:a.p+"static/media/open-now-checkbox--checked.png",toString:function(){return a.p+"static/media/open-now-checkbox--checked.png"},placeholder:void 0,width:16,height:16}},163:function(e,t,a){e.exports=a(404)},401:function(e,t,a){},404:function(e,t,a){"use strict";a.r(t);var r,n,i,c,s,l,o,u,p,m,h,f,d,b,g,y,w=a(1),v=a.n(w),O=a(59),E=a.n(O),j=a(406),R=a(30),N=a(38),k=a(49),C=a(48),_=a(50),B=a(408),$=a(407),x=a(19),z=a(63),F=a(16),D=a(14),S=(a(169),a(5)),P=a(86),A=a.n(P),I=function e(){Object(R.a)(this,e),this.searchForRestaurants=function(e){return A.a.post("https://qw6c0mxwz9.execute-api.eu-west-1.amazonaws.com/default/lightswitch",JSON.stringify({path:"search?location=".concat(e)}),{headers:{"X-Api-Key":"S0a5WCywb68N075YgoTVK3TidPB11bus2vplyW9s","Content-Type":"application/json"}})},this.getRestaurantDetails=function(e){return A.a.post("https://qw6c0mxwz9.execute-api.eu-west-1.amazonaws.com/default/lightswitch",JSON.stringify({path:e}),{headers:{"X-Api-Key":"S0a5WCywb68N075YgoTVK3TidPB11bus2vplyW9s","Content-Type":"application/json"}})},this.getRestaurantReviews=function(e){return A.a.post("https://qw6c0mxwz9.execute-api.eu-west-1.amazonaws.com/default/lightswitch",JSON.stringify({path:"".concat(e,"/reviews")}),{headers:{"X-Api-Key":"S0a5WCywb68N075YgoTVK3TidPB11bus2vplyW9s","Content-Type":"application/json"}})}},T=a(158),L=(r=function(){function e(){Object(R.a)(this,e),this.yelpApi=new I,Object(F.a)(this,"restaurants",n,this),Object(F.a)(this,"currentRestaurantId",i,this),Object(F.a)(this,"currentRestaurantDetails",c,this),Object(F.a)(this,"currentRestaurantReviews",s,this),Object(F.a)(this,"filterByOpenNow",l,this),Object(F.a)(this,"filterByCategory",o,this),Object(F.a)(this,"filterByPrice",u,this),Object(F.a)(this,"getRestaurants",p,this),Object(F.a)(this,"setRestaurants",m,this),Object(F.a)(this,"setCurrentRestaurantId",h,this),Object(F.a)(this,"setCurrentRestaurantDetails",f,this),Object(F.a)(this,"setCurrentRestaurantReviews",d,this),Object(F.a)(this,"setFilterByOpenNow",b,this),Object(F.a)(this,"setFilterByCategory",g,this),Object(F.a)(this,"setFilterByPrice",y,this)}return Object(N.a)(e,[{key:"filteredRestaurants",get:function(){var e=this,t=this.restaurants;return this.filterByOpenNow&&(t=t.filter(function(e){return!e.is_closed})),this.filterByCategory&&(t=t.filter(function(t){return t.categories.find(function(t){return t.title===e.filterByCategory})})),this.filterByPrice&&(t=t.filter(function(t){return t.price===e.filterByPrice})),t}},{key:"categories",get:function(){return this.restaurants?Object(z.a)(new T.Set(this.restaurants.reduce(function(e,t){var a=t.categories;return Object(z.a)(e).concat(Object(z.a)(a.map(function(e){return e.title})))},[]))):[]}}]),e}(),n=Object(D.a)(r.prototype,"restaurants",[S.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),i=Object(D.a)(r.prototype,"currentRestaurantId",[S.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),c=Object(D.a)(r.prototype,"currentRestaurantDetails",[S.l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),s=Object(D.a)(r.prototype,"currentRestaurantReviews",[S.l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),l=Object(D.a)(r.prototype,"filterByOpenNow",[S.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),o=Object(D.a)(r.prototype,"filterByCategory",[S.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),u=Object(D.a)(r.prototype,"filterByPrice",[S.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),p=Object(D.a)(r.prototype,"getRestaurants",[S.d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){return e.yelpApi.searchForRestaurants(t).then(function(t){var a=t.data;return e.setRestaurants(a.businesses)})}}}),m=Object(D.a)(r.prototype,"setRestaurants",[S.d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.restaurants=t}}}),h=Object(D.a)(r.prototype,"setCurrentRestaurantId",[S.d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.currentRestaurantId=t,e.setCurrentRestaurantDetails(null),e.setCurrentRestaurantReviews([]),e.yelpApi.getRestaurantDetails(t).then(function(t){var a=t.data;e.setCurrentRestaurantDetails(a)}),e.yelpApi.getRestaurantReviews(t).then(function(t){var a=t.data;e.setCurrentRestaurantReviews(a.reviews)})}}}),f=Object(D.a)(r.prototype,"setCurrentRestaurantDetails",[S.d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.currentRestaurantDetails=t}}}),d=Object(D.a)(r.prototype,"setCurrentRestaurantReviews",[S.d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.currentRestaurantReviews=t}}}),b=Object(D.a)(r.prototype,"setFilterByOpenNow",[S.d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.filterByOpenNow=t}}}),g=Object(D.a)(r.prototype,"setFilterByCategory",[S.d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.filterByCategory=t}}}),y=Object(D.a)(r.prototype,"setFilterByPrice",[S.d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.filterByPrice=t}}}),Object(D.a)(r.prototype,"filteredRestaurants",[S.e],Object.getOwnPropertyDescriptor(r.prototype,"filteredRestaurants"),r.prototype),Object(D.a)(r.prototype,"categories",[S.e],Object.getOwnPropertyDescriptor(r.prototype,"categories"),r.prototype),r),W=function(){return v.a.createElement("svg",{className:"star-source",xmlns:"http://www.w3.org/2000/svg",xlinkHref:"http://www.w3.org/1999/xlink"},v.a.createElement("defs",null,v.a.createElement("g",{id:"icon-star"},v.a.createElement("path",{d:"M20.388,10.918L32,12.118l-8.735,7.749L25.914,31.4l-9.893-6.088L6.127,31.4l2.695-11.533L0,12.118 l11.547-1.2L16.026,0.6L20.388,10.918z"})),v.a.createElement("linearGradient",{id:"halfGradient"},v.a.createElement("stop",{stopOpacity:"1",offset:"50%",stopColor:"#002B56"}),v.a.createElement("stop",{stopOpacity:"0",offset:"50%"}))))},Y=a(159),J=a.n(Y),K=a(160),M=a.n(K),H=function(e){function t(){var e,a;Object(R.a)(this,t);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(a=Object(k.a)(this,(e=Object(C.a)(t)).call.apply(e,[this].concat(n)))).onFilterByOpenNowChange=function(e){var t=e.target.checked;a.props.setFilterByOpenNow(t)},a.onCategoryChange=function(e){var t=e.target.value;return a.props.setFilterByCategory(t)},a.onPriceChange=function(e){var t=e.target.value;return a.props.setFilterByPrice(t)},a}return Object(_.a)(t,e),Object(N.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return v.a.createElement("div",{className:"filters"},v.a.createElement("div",{style:{display:"none"}},v.a.createElement("img",{alt:"c1",src:J.a}),v.a.createElement("img",{alt:"c2",src:M.a})),"Filter by:",v.a.createElement("input",{className:"filters__open-now",type:"checkbox",id:"opennow",checked:this.props.filterByOpenNow,onChange:this.onFilterByOpenNowChange}),v.a.createElement("label",{htmlFor:"opennow"}),v.a.createElement("span",{className:"filters__open-now-label"},"Open Now"),v.a.createElement("span",{className:"filters__price-label"},"Price"),v.a.createElement("select",{onChange:this.onPriceChange},v.a.createElement("option",{key:"All",value:""},"All prices"),v.a.createElement("option",{key:"$",value:"$"},"$"),v.a.createElement("option",{key:"$$",value:"$$"},"$$"),v.a.createElement("option",{key:"$$$",value:"$$$"},"$$$"),v.a.createElement("option",{key:"$$$$",value:"$$$$"},"$$$$")),v.a.createElement("span",{className:"filters__category-label"},"Category"),v.a.createElement("select",{onChange:this.onCategoryChange},v.a.createElement("option",{key:"All",value:""},"All categories"),this.props.categories.map(function(e){return v.a.createElement("option",{key:e,value:e},e)})))}}]),t}(w.Component),V=Object(x.b)(function(e){var t=e.appState;return{filterByOpenNow:t.filterByOpenNow,setFilterByOpenNow:t.setFilterByOpenNow,categories:t.categories,setFilterByCategory:t.setFilterByCategory,setFilterByPrice:t.setFilterByPrice}})(Object(x.c)(H)),X=a(405),q=function(e){var t=e.open;return v.a.createElement("div",{className:"status"},v.a.createElement("span",{className:"status__indicator ".concat(t&&"status__indicator--open")},"\u2b24"),t?"Open Now":"Closed")},G=function(e){for(var t=e.rating,a=[],r=1;r<=5;r++){var n=void 0;r>=t+1?n="star--empty":r>t&&(n="star--half"),a.push(v.a.createElement("use",{xlinkHref:"#icon-star",key:"star-".concat(r,"-").concat(n),x:36*(r-1),y:"0",className:n||""}))}return v.a.createElement("div",{className:"star-rating"},v.a.createElement("svg",{className:"star",viewBox:"0 0 180 32"},a))},U=function(e){var t,a=e.restaurant,r=a.id,n=a.name,i=a.image_url,c=a.rating,s=a.categories,l=a.price,o=a.is_closed,u=s.length&&s[0].title;return v.a.createElement("div",{className:"restaurants-list-item"},v.a.createElement("img",{alt:n,src:i}),v.a.createElement("h2",null,n),v.a.createElement(G,{rating:c}),v.a.createElement("div",{className:"restaurants-list-item__details"},v.a.createElement("div",null,u," \u2022 ",l),v.a.createElement(q,{open:!o})),v.a.createElement("div",{className:"restaurants-list-item__learn-more-wrapper"},v.a.createElement(X.a,{to:"/restaurant/".concat(r,"/").concat((t=n,t.replace(/\W/g,"-")))},"Learn more")))},Q=function(e){function t(){return Object(R.a)(this,t),Object(k.a)(this,Object(C.a)(t).apply(this,arguments))}return Object(_.a)(t,e),Object(N.a)(t,[{key:"componentDidMount",value:function(){this.props.getRestaurants("Las%20Vegas")}},{key:"render",value:function(){return v.a.createElement("div",{className:"restaurants-list"},v.a.createElement("ul",null,this.props.restaurants.map(function(e){return v.a.createElement("li",{key:e.id},v.a.createElement(U,{restaurant:e}))})))}}]),t}(w.Component),Z=Object(x.b)(function(e){var t=e.appState;return{restaurants:t.filteredRestaurants,getRestaurants:t.getRestaurants}})(Object(x.c)(Q)),ee=function(){return v.a.createElement("div",{className:"restaurants-view"},v.a.createElement("div",{className:"hero"},v.a.createElement("h1",null,"Restaurants")),v.a.createElement(V,null),v.a.createElement(Z,null))},te=function(e){var t=e.photos;return v.a.createElement("ul",{className:"photos"},t.map(function(e){var t=e.url,a=e.src,r=v.a.createElement("img",{alt:"Restaurant",src:a});return v.a.createElement("li",{key:a},t?v.a.createElement("a",{href:t,target:"_blank",rel:"noopener noreferrer"},r):r)}))},ae=a(161),re=a.n(ae),ne=function(e){var t=e.review,a=t.text,r=t.time_created,n=t.rating,i=t.user,c=i.name,s=i.image_url,l=s?v.a.createElement("img",{className:"review-item__author-image",alt:c,src:s}):v.a.createElement("div",{className:"review-item__author-image-placeholder"});return v.a.createElement("div",{className:"review-item"},v.a.createElement("div",{className:"review-item__author"},l,v.a.createElement("div",null,v.a.createElement("h3",null,c),v.a.createElement("p",{className:"review-item__date"},re()(r).format("M/D/YYYY")))),v.a.createElement("div",{className:"review-item__content"},v.a.createElement(G,{rating:n}),v.a.createElement("p",null,a)))},ie=Object(x.b)(function(e){return{currentRestaurantReviews:e.appState.currentRestaurantReviews}})(Object(x.c)(function(e){var t=e.currentRestaurantReviews,a=t.length,r="".concat(a," Review").concat(a>1&&"s");return v.a.createElement("div",{className:"reviews"},v.a.createElement("h2",null,r),v.a.createElement("ul",{className:"reviews__list"},t.map(function(e){return v.a.createElement("li",{key:e.id},v.a.createElement(ne,{review:e}))})))})),ce=function(e){function t(){return Object(R.a)(this,t),Object(k.a)(this,Object(C.a)(t).apply(this,arguments))}return Object(_.a)(t,e),Object(N.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.match.params.id;(0,e.setCurrentRestaurantId)(t)}},{key:"getContent",value:function(){var e=this.props.currentRestaurantDetails,t=e.name,a=e.coordinates,r=e.photos,n=e.location,i=e.rating,c=e.categories,s=e.price,l=e.is_closed,o=c.length&&c[0].title;return v.a.createElement("div",{className:"restaurants-details"},v.a.createElement("div",{className:"restaurants-details__main"},v.a.createElement("h1",null,t),v.a.createElement(G,{rating:i}),v.a.createElement("div",{className:"restaurants-details-item__details"},v.a.createElement("div",null,o," \u2022 ",s),v.a.createElement(q,{open:!l})),v.a.createElement("div",{className:"restaurant-details__photos"},v.a.createElement(te,{photos:[{url:function(e){var t=e.coordinates,a=t.latitude,r=t.longitude,n=e.name;return"https://www.google.com/maps/search/".concat(n,",").concat(a,",").concat(r)}(e),src:function(e){var t=[e.latitude,e.longitude].join(",");return"https://maps.googleapis.com/maps/api/staticmap?center=".concat(t,"&markers=").concat(t,"&zoom=15&size=400x288&maptype=roadmap&key=AIzaSyCDc4LkExUhXGwButHuEENHOTE3iAJ8k2E")}(a)}].concat(Object(z.a)(r.map(function(e){return{src:e}})))})),v.a.createElement("div",{className:"restaurants-details__address"},n.display_address.join(", "))),v.a.createElement(ie,null))}},{key:"render",value:function(){return this.props.currentRestaurantDetails?this.getContent():null}}]),t}(w.Component),se=Object(x.b)(function(e){var t=e.appState;return{setCurrentRestaurantId:t.setCurrentRestaurantId,currentRestaurantDetails:t.currentRestaurantDetails}})(Object(x.c)(ce)),le=function(e){function t(){var e,a;Object(R.a)(this,t);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(a=Object(k.a)(this,(e=Object(C.a)(t)).call.apply(e,[this].concat(n)))).appState=new L,a}return Object(_.a)(t,e),Object(N.a)(t,[{key:"render",value:function(){return v.a.createElement("div",{className:"App"},v.a.createElement(x.a,{appState:this.appState},v.a.createElement(B.a,null,v.a.createElement($.a,{exact:!0,path:"/",component:ee}),v.a.createElement($.a,{path:"/restaurant/:id/:urlFriendlyName",component:se}))),v.a.createElement(W,null))}}]),t}(w.Component);a(401),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));E.a.render(v.a.createElement(j.a,null,v.a.createElement(le,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[163,2,1]]]);
//# sourceMappingURL=main.48488a0e.chunk.js.map